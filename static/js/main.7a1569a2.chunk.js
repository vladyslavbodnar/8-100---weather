(this.webpackJsonpweather=this.webpackJsonpweather||[]).push([[0],{37:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),i=n(20),r=n.n(i),o=(n(37),n(5)),s=n(15),u=n(7),j=n(14),l=n(3),d=n(2),b=function(){return Object(d.jsxs)("div",{children:[Object(d.jsx)(j.b,{to:"/",children:"Weather"}),Object(d.jsx)(j.b,{to:"/settings",children:"Settings"})]})},h=n(28),O=n.n(h),p=function(){Object(c.useEffect)((function(){document.title="Settings"}),[]);var e=Object(l.f)(),t=Object(c.useContext)(S),n=Object(o.a)(t,2),a=n[0],i=n[1];return Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{children:["Temperature Unit:",Object(d.jsxs)("select",{value:a.temperatureUnit,onChange:function(e){return i({type:e.target.value})},children:[Object(d.jsx)("option",{value:"c",children:"Celsius"}),Object(d.jsx)("option",{value:"f",children:"Fahrenheit"}),Object(d.jsx)("option",{value:"k",children:"Kelvin"})]})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"Saved Locations"}),a.savedLocations.length>0?a.savedLocations.map((function(t){return Object(d.jsxs)("div",{children:[Object(d.jsx)("button",{className:"Settings__city-name",onClick:function(){return i({type:"setLocation",payload:t}),void e.push("/")},children:t.split(",").join(", ")}),Object(d.jsx)("button",{onClick:function(){return i({type:"removeLocation",payload:t})},children:Object(d.jsx)(O.a,{})})]},t)})):Object(d.jsx)("p",{children:"Empty :c"})]})]})},v=function(e){var t=e.cities,n=Object(c.useState)(""),a=Object(o.a)(n,2),i=a[0],r=a[1],s=Object(c.useState)([]),u=Object(o.a)(s,2),j=u[0],l=u[1],b=Object(c.useContext)(S),h=Object(o.a)(b,2)[1],O=function(e){"Enter"===e.key&&(h({type:"setLocation",payload:e.target.value}),r(""),l([]))};return Object(d.jsxs)("div",{children:[Object(d.jsx)("input",{type:"text",value:i,onChange:function(e){return function(e){if(r(e.target.value),""!==e.target.value){var n=t.filter((function(t){return t.name.startsWith(e.target.value)})).slice(0,20);l(n)}else l([])}(e)},onKeyDown:function(e){return O(e)}}),j.map((function(e,t){return Object(d.jsxs)("h3",{onClick:function(){return O({key:"Enter",target:{value:"".concat(e.name,",").concat(e.countryCode)}})},children:[e.name,", ",e.countryCode]},t)}))]})},m=n(29),x=n.n(m),f=n(30),y=n.n(f),g=n(27),w=n.n(g),L="cc4ab46be8c995ffafc858ed7cd26383",k=function(e){var t=e.cities,n=Object(c.useContext)(S),a=Object(o.a)(n,2),i=a[0],r=a[1],s=Object(c.useState)(null),u=Object(o.a)(s,2),j=u[0],l=u[1],b=Object(c.useState)(null),h=Object(o.a)(b,2),O=h[0],p=h[1],m=Object(c.useState)(""),f=Object(o.a)(m,2),g=f[0],k=f[1];Object(c.useEffect)((function(){document.title="Weather",i.currentLocation||navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){var t=e.coords.latitude,n=e.coords.longitude;r({type:"setLocation",payload:{latitude:t,longitude:n}})}))}),[]),Object(c.useEffect)((function(){i.currentLocation&&function(e){k("Searching..");var t,n="";switch(i.temperatureUnit){case"c":t="metric";break;case"f":t="imperial";break;case"k":t="standard"}"object"===typeof e&&(n="https://api.openweathermap.org/data/2.5/forecast?lat=".concat(e.latitude,"&lon=").concat(e.longitude,"&units=").concat(t,"&appid=").concat(L)),"string"===typeof e&&(n="https://api.openweathermap.org/data/2.5/forecast?q=".concat(e,"&units=").concat(t,"&APPID=").concat(L)),fetch(n).then((function(e){if(e.ok)return e.json();k("Location not found")})).then((function(e){return l(e)}))}(i.currentLocation)}),[i.currentLocation]),Object(c.useEffect)((function(){var e;if(j){var t;switch(j.list[0].weather[0].main){case"Rain":t="\ud83c\udf27\ufe0f";break;case"Snow":t="\u2744\ufe0f";break;case"Thunderstorm":t="\ud83c\udf29\ufe0f";break;case"Drizzle":t="\ud83c\udf27\ufe0f";break;case"Clouds":t="\u2601\ufe0f";break;case"Clear":t="\u2600\ufe0f";break;default:t=""}document.title="".concat(j.city.name," ").concat(t," - Weather")}(null===i||void 0===i||null===(e=i.savedLocations)||void 0===e?void 0:e.some((function(e){var t,n;return e==="".concat(null===j||void 0===j||null===(t=j.city)||void 0===t?void 0:t.name,",").concat(null===j||void 0===j||null===(n=j.city)||void 0===n?void 0:n.country)})))?p(!0):p(!1)}),[j]),Object(c.useEffect)((function(){var e;(null===i||void 0===i||null===(e=i.savedLocations)||void 0===e?void 0:e.some((function(e){var t,n;return e==="".concat(null===j||void 0===j||null===(t=j.city)||void 0===t?void 0:t.name,",").concat(null===j||void 0===j||null===(n=j.city)||void 0===n?void 0:n.country)})))?p(!0):p(!1)}),[i]);return Object(d.jsxs)("div",{children:[Object(d.jsx)(v,{cities:t}),j?Object(d.jsxs)("div",{children:[Object(d.jsxs)("h2",{children:[j.city.name,", ",j.city.country]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("p",{children:j.list[0].weather[0].description}),Object(d.jsx)("button",{onClick:function(){return O||r({type:"saveLocation",payload:"".concat(j.city.name,",").concat(j.city.country)}),void(O&&r({type:"removeLocation",payload:"".concat(j.city.name,",").concat(j.city.country)}))},children:O?Object(d.jsx)(x.a,{}):Object(d.jsx)(y.a,{})}),Object(d.jsxs)("p",{children:[Math.round(j.list[0].main.temp),"\xb0",i.temperatureUnit]}),Object(d.jsxs)("p",{children:["Humidity: ",j.list[0].main.humidity,"%"]}),Object(d.jsxs)("p",{children:[Object(d.jsx)(w.a,{style:{transform:"rotate(".concat(j.list[0].wind.deg-45,"deg)")}}),j.list[0].wind.speed,"c"===i.temperatureUnit&&"meter/sec","f"===i.temperatureUnit&&"miles/hour","k"===i.temperatureUnit&&"meter/sec"]}),Object(d.jsx)("p",{children:j.list[0].dx_txt}),Object(d.jsxs)("h3",{children:["Sunrise: ",new Date(1e3*j.city.sunrise).getHours(),":",new Date(1e3*j.city.sunrise).getMinutes()]}),Object(d.jsxs)("h3",{children:["Sunset: ",new Date(1e3*j.city.sunset).getHours(),":",new Date(1e3*j.city.sunset).getMinutes()]})]}),Object(d.jsx)("div",{className:"Weather__future-predictions",children:j&&j.list.map((function(e){if(e!==j.list[0])return console.log(e.weather[0].main),Object(d.jsxs)("div",{children:[0===new Date(e.dt_txt).getHours()?Object(d.jsxs)("p",{children:[new Date(e.dt_txt).getDate(),"/",new Date(e.dt_txt).getMonth()+1]}):Object(d.jsxs)("p",{children:[new Date(e.dt_txt).getHours(),":00"]}),"Rain"===e.weather[0].main&&Object(d.jsx)("p",{children:"Rain"}),"Snow"===e.weather[0].main&&Object(d.jsx)("p",{children:"Snow"}),"Thunderstorm"===e.weather[0].main&&Object(d.jsx)("p",{children:"Thunderstorm"}),"Drizzle"===e.weather[0].main&&Object(d.jsx)("p",{children:"Drizzle"}),"Clouds"===e.weather[0].main&&Object(d.jsx)("p",{children:"Clouds"}),"Clear"===e.weather[0].main&&Object(d.jsx)("p",{children:"Clear"}),Object(d.jsxs)("p",{children:[Math.round(e.main.temp),"\xb0",i.temperatureUnit]}),Object(d.jsxs)("p",{children:[Object(d.jsx)(w.a,{style:{transform:"rotate(".concat(e.wind.deg-45,"deg)")}}),e.wind.speed,"c"===i.temperatureUnit&&"meter/sec","f"===i.temperatureUnit&&"miles/hour","k"===i.temperatureUnit&&"meter/sec"]})]},e.dt_txt)}))})]}):Object(d.jsx)("p",{children:g})]})},C=n(31),S=a.a.createContext(),U={temperatureUnit:"c",currentLocation:null,savedLocations:[]};function D(e,t){switch(t.type){case"c":return Object(u.a)(Object(u.a)({},e),{},{temperatureUnit:"c"});case"f":return Object(u.a)(Object(u.a)({},e),{},{temperatureUnit:"f"});case"k":return Object(u.a)(Object(u.a)({},e),{},{temperatureUnit:"k"});case"setLocation":return Object(u.a)(Object(u.a)({},e),{},{currentLocation:t.payload});case"saveLocation":return e.savedLocations.some((function(e){return e===t.payload}))?e:Object(u.a)(Object(u.a)({},e),{},{savedLocations:[].concat(Object(s.a)(e.savedLocations),[t.payload])});case"removeLocation":return Object(u.a)(Object(u.a)({},e),{},{savedLocations:e.savedLocations.filter((function(e){return e!==t.payload}))});default:throw new Error}}var E=function(){var e=Object(c.useReducer)(D,U),t=Object(o.a)(e,2),n=t[0],a=t[1],i=Object(c.useMemo)((function(){return C.City.getAllCities()}));return Object(d.jsx)(S.Provider,{value:[n,a],children:Object(d.jsx)("div",{className:"App",children:Object(d.jsxs)(j.a,{children:[Object(d.jsxs)(l.c,{children:[Object(d.jsx)(l.a,{path:"/",exact:!0,children:Object(d.jsx)(k,{cities:i})}),Object(d.jsx)(l.a,{path:"/settings",children:Object(d.jsx)(p,{})})]}),Object(d.jsx)(b,{})]})})})};r.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(E,{})}),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.7a1569a2.chunk.js.map