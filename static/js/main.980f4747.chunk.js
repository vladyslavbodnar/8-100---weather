(this.webpackJsonpweather=this.webpackJsonpweather||[]).push([[0],{37:function(t,e,n){},55:function(t,e,n){"use strict";n.r(e);var c=n(0),a=n.n(c),i=n(20),r=n.n(i),o=(n(37),n(5)),s=n(15),u=n(7),j=n(14),d=n(3),l=n(2),b=function(){return Object(l.jsxs)("div",{children:[Object(l.jsx)(j.b,{to:"/",children:"Weather"}),Object(l.jsx)(j.b,{to:"/settings",children:"Settings"})]})},O=n(28),h=n.n(O),p=function(){Object(c.useEffect)((function(){document.title="Settings"}),[]);var t=Object(d.f)(),e=Object(c.useContext)(U),n=Object(o.a)(e,2),a=n[0],i=n[1];return Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{children:["Temperature Unit:",Object(l.jsxs)("select",{value:a.temperatureUnit,onChange:function(t){return i({type:t.target.value})},children:[Object(l.jsx)("option",{value:"c",children:"Celsius"}),Object(l.jsx)("option",{value:"f",children:"Fahrenheit"}),Object(l.jsx)("option",{value:"k",children:"Kelvin"})]})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Saved Locations"}),a.savedLocations.length>0?a.savedLocations.map((function(e){return Object(l.jsxs)("div",{children:[Object(l.jsx)("button",{className:"Settings__city-name",onClick:function(){return i({type:"setLocation",payload:e}),void t.push("/")},children:e.split(",").join(", ")}),Object(l.jsx)("button",{onClick:function(){return i({type:"removeLocation",payload:e})},children:Object(l.jsx)(h.a,{})})]},e)})):Object(l.jsx)("p",{children:"Empty :c"})]})]})},v=function(t){var e=t.cities,n=Object(c.useState)(""),a=Object(o.a)(n,2),i=a[0],r=a[1],s=Object(c.useState)([]),u=Object(o.a)(s,2),j=u[0],d=u[1],b=Object(c.useContext)(U),O=Object(o.a)(b,2)[1],h=function(t){"Enter"===t.key&&(O({type:"setLocation",payload:t.target.value}),r(""),d([]))};return Object(l.jsxs)("div",{children:[Object(l.jsx)("input",{type:"text",value:i,onChange:function(t){return function(t){if(r(t.target.value),""!==t.target.value){var n=e.filter((function(e){return e.name.startsWith(t.target.value)}));d(n)}else d([])}(t)},onKeyDown:function(t){return h(t)}}),j.map((function(t,e){return Object(l.jsxs)("h3",{onClick:function(){return h({key:"Enter",target:{value:"".concat(t.name,",").concat(t.countryCode)}})},children:[t.name,", ",t.countryCode]},e)}))]})},f=n(29),m=n.n(f),x=n(30),y=n.n(x),g=n(27),w=n.n(g),L="cc4ab46be8c995ffafc858ed7cd26383",k=function(t){var e=t.cities,n=Object(c.useContext)(U),a=Object(o.a)(n,2),i=a[0],r=a[1],s=Object(c.useState)(null),u=Object(o.a)(s,2),j=u[0],d=u[1],b=Object(c.useState)(null),O=Object(o.a)(b,2),h=O[0],p=O[1],f=Object(c.useState)(""),x=Object(o.a)(f,2),g=x[0],k=x[1];Object(c.useEffect)((function(){document.title="Weather",i.currentLocation||navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(t){var e=t.coords.latitude,n=t.coords.longitude;r({type:"setLocation",payload:{latitude:e,longitude:n}})}))}),[]),Object(c.useEffect)((function(){i.currentLocation&&function(t){k("Searching..");var e,n="";switch(i.temperatureUnit){case"c":e="metric";break;case"f":e="imperial";break;case"k":e="standard"}"object"===typeof t&&(n="https://api.openweathermap.org/data/2.5/forecast?lat=".concat(t.latitude,"&lon=").concat(t.longitude,"&units=").concat(e,"&appid=").concat(L)),"string"===typeof t&&(n="https://api.openweathermap.org/data/2.5/forecast?q=".concat(t,"&units=").concat(e,"&APPID=").concat(L)),fetch(n).then((function(t){if(t.ok)return t.json();k("Location not found")})).then((function(t){return d(t)}))}(i.currentLocation)}),[i.currentLocation]),Object(c.useEffect)((function(){var t;if(j){var e;switch(j.list[0].weather[0].main){case"Rain":e="\ud83c\udf27\ufe0f";break;case"Snow":e="\u2744\ufe0f";break;case"Thunderstorm":e="\ud83c\udf29\ufe0f";break;case"Thunderstorm":e="";break;case"Drizzle":e="\ud83c\udf27\ufe0f";break;case"Clouds":e="\u2601\ufe0f";break;case"Clear":e="\u2600\ufe0f";break;default:e=""}document.title="".concat(j.city.name," ").concat(e," - Weather")}(null===i||void 0===i||null===(t=i.savedLocations)||void 0===t?void 0:t.some((function(t){var e,n;return t==="".concat(null===j||void 0===j||null===(e=j.city)||void 0===e?void 0:e.name,",").concat(null===j||void 0===j||null===(n=j.city)||void 0===n?void 0:n.country)})))?p(!0):p(!1)}),[j]),Object(c.useEffect)((function(){var t;(null===i||void 0===i||null===(t=i.savedLocations)||void 0===t?void 0:t.some((function(t){var e,n;return t==="".concat(null===j||void 0===j||null===(e=j.city)||void 0===e?void 0:e.name,",").concat(null===j||void 0===j||null===(n=j.city)||void 0===n?void 0:n.country)})))?p(!0):p(!1)}),[i]);return Object(l.jsxs)("div",{children:[Object(l.jsx)(v,{cities:e}),j?Object(l.jsxs)("div",{children:[Object(l.jsxs)("h2",{children:[j.city.name,", ",j.city.country]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("p",{children:j.list[0].weather[0].description}),Object(l.jsx)("button",{onClick:function(){return h||r({type:"saveLocation",payload:"".concat(j.city.name,",").concat(j.city.country)}),void(h&&r({type:"removeLocation",payload:"".concat(j.city.name,",").concat(j.city.country)}))},children:h?Object(l.jsx)(m.a,{}):Object(l.jsx)(y.a,{})}),Object(l.jsxs)("p",{children:[Math.round(j.list[0].main.temp),"\xb0",i.temperatureUnit]}),Object(l.jsxs)("p",{children:["Humidity: ",j.list[0].main.humidity,"%"]}),Object(l.jsxs)("p",{children:[Object(l.jsx)(w.a,{style:{transform:"rotate(".concat(j.list[0].wind.deg-45,"deg)")}}),j.list[0].wind.speed,"c"===i.temperatureUnit&&"meter/sec","f"===i.temperatureUnit&&"miles/hour","k"===i.temperatureUnit&&"meter/sec"]}),Object(l.jsx)("p",{children:j.list[0].dx_txt}),Object(l.jsxs)("h3",{children:["Sunrise: ",new Date(1e3*j.city.sunrise).getHours(),":",new Date(1e3*j.city.sunrise).getMinutes()]}),Object(l.jsxs)("h3",{children:["Sunset: ",new Date(1e3*j.city.sunset).getHours(),":",new Date(1e3*j.city.sunset).getMinutes()]})]}),Object(l.jsx)("div",{className:"Weather__future-predictions",children:j&&j.list.map((function(t){if(t!==j.list[0])return Object(l.jsxs)("div",{children:[0===new Date(t.dt_txt).getHours()?Object(l.jsxs)("p",{children:[new Date(t.dt_txt).getDate(),"/",new Date(t.dt_txt).getMonth()+1]}):Object(l.jsxs)("p",{children:[new Date(t.dt_txt).getHours(),":00"]}),Object(l.jsx)("img",{alt:t.weather[0].main}),Object(l.jsxs)("p",{children:[Math.round(t.main.temp),"\xb0",i.temperatureUnit]}),Object(l.jsxs)("p",{children:[Object(l.jsx)(w.a,{style:{transform:"rotate(".concat(t.wind.deg-45,"deg)")}}),t.wind.speed,"c"===i.temperatureUnit&&"meter/sec","f"===i.temperatureUnit&&"miles/hour","k"===i.temperatureUnit&&"meter/sec"]})]},t.dt_txt)}))})]}):Object(l.jsx)("p",{children:g})]})},C=n(31),U=a.a.createContext(),S={temperatureUnit:"c",currentLocation:null,savedLocations:[]};function D(t,e){switch(e.type){case"c":return Object(u.a)(Object(u.a)({},t),{},{temperatureUnit:"c"});case"f":return Object(u.a)(Object(u.a)({},t),{},{temperatureUnit:"f"});case"k":return Object(u.a)(Object(u.a)({},t),{},{temperatureUnit:"k"});case"setLocation":return Object(u.a)(Object(u.a)({},t),{},{currentLocation:e.payload});case"saveLocation":return t.savedLocations.some((function(t){return t===e.payload}))?t:Object(u.a)(Object(u.a)({},t),{},{savedLocations:[].concat(Object(s.a)(t.savedLocations),[e.payload])});case"removeLocation":return Object(u.a)(Object(u.a)({},t),{},{savedLocations:t.savedLocations.filter((function(t){return t!==e.payload}))});default:throw new Error}}var E=function(){var t=Object(c.useReducer)(D,S),e=Object(o.a)(t,2),n=e[0],a=e[1],i=Object(c.useMemo)((function(){return C.City.getAllCities().sort((function(t,e){return t.name>e.name?1:-1}))}),[]);return Object(l.jsx)(U.Provider,{value:[n,a],children:Object(l.jsx)("div",{className:"App",children:Object(l.jsxs)(j.a,{children:[Object(l.jsxs)(d.c,{children:[Object(l.jsx)(d.a,{path:"/",exact:!0,children:Object(l.jsx)(k,{cities:i})}),Object(l.jsx)(d.a,{path:"/settings",children:Object(l.jsx)(p,{})})]}),Object(l.jsx)(b,{})]})})})};r.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(E,{})}),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.980f4747.chunk.js.map